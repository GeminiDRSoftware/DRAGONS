{% extends base %}

{% block preamble %}
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.16.1/vis.min.js"></script>
{% endblock %}

{% block postamble %}
<!-- favico stuff -->
<link rel="apple-touch-icon" sizes="57x57" href="/dragons/static/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/dragons/static/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/dragons/static/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/dragons/static/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/dragons/static/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/dragons/static/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/dragons/static/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/dragons/static/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/dragons/static/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/dragons/static/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/dragons/static/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/dragons/static/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/dragons/static/favicon/favicon-16x16.png">
<link rel="manifest" href="/dragons/static/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/dragons/static/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<!-- end favico stuff -->

<link rel="stylesheet" href="dragons/static/dragons.css">

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
<script src="dragons/static/version.js"></script>

<!-- Custom CSS/JS for this template -->
<link rel="stylesheet" href="dragons/static/css/trace_apertures.css">
<link rel="stylesheet" href="dragons/static/css/loading.css">
<script src="dragons/static/js/openHelpPopup.js"></script>
<script src="dragons/static/js/loading.js"></script>

{% endblock %}

{% block contents %}

    <!-- modal, for long running bokeh code -->
    <div class="modal_overlay">
        <div class="modal_textbox">
            <b>Thinking...</b>
        </div>
    </div>

    <div class="help-page">
        <div class="help-content">
            {{ primitive_long_help }}
            <button id="close-btn" type="button" onclick="closeHelp()">Close</button>
        </div>
    </div>

<div class="container">

    <header id="top">
        <div class="logo"><img src="dragons/static/DRAGONS.png"></div>
        <div class="banner">
            <span class="title">{{ primitive_title }}</span>
            <span class="primitive-name"> {{ primitive_name }} </span>
            <button id="help-btn" type="button" onclick="openHelpPopup('Trace Apertures - Help')">Help</button>
        </div>
    </header>

    <!-- add tabIndex="-1" to the div if we need to make it key-listenable -->
    <section class="content">
        <div id="main_div" class="content-body">
            {% block main_div %}
                {% for doc in docs %}
                    {{ embed(doc) if doc.elementid }}
                    {% for root in doc.roots %}
                        {{ embed(root) | indent(10) }}
                    {% endfor %}
                {% endfor %}
            {% endblock %}
        </div>
    </section>

    <footer id="footer">
        Made with
        <a href="https://github.com/GeminiDRSoftware/DRAGONS">DRAGONS</a>
    </footer>

</div>

<!--<script type="text/javascript">-->
<!--    // $("#plot_div").keydown(function(event) {-->
<!--    // document.getElementById("plot_div").addEventListener("keydown", function(event){-->
<!--    // doing whole document.  Or we could figure out how to target a bokeh-generated container div-->
<!--    // preventDefault causes the key not to pass to any widgets that are in focus, such as a text input-->
<!--    document.addEventListener("keydown", function(event){-->
<!--        switch(event.key){-->
<!--        case 'a':-->
<!--            $.ajax('/handle_key?key=a');-->
<!--            event.preventDefault()-->
<!--            break;-->
<!--        case 'b':-->
<!--            $.ajax('/handle_key?key=b');-->
<!--            event.preventDefault()-->
<!--            break;-->
<!--        case 'r':-->
<!--            $.ajax('/handle_key?key=r');-->
<!--            event.preventDefault()-->
<!--            break;-->
<!--        case 'd':-->
<!--            $.ajax('/handle_key?key=d');-->
<!--            event.preventDefault()-->
<!--            break;-->
<!--        case 'e':-->
<!--            $.ajax('/handle_key?key=e');-->
<!--            event.preventDefault()-->
<!--            break;-->
<!--        case 'f':-->
<!--            $.ajax('/handle_key?key=f');-->
<!--            event.preventDefault()-->
<!--            break;-->
<!--        case '[':-->
<!--            $.ajax('/handle_key?key=[');-->
<!--            event.preventDefault()-->
<!--            break;-->
<!--        case ']':-->
<!--            $.ajax('/handle_key?key=]');-->
<!--            event.preventDefault()-->
<!--            break;-->
<!--        case 'l':-->
<!--            $.ajax('/handle_key?key=l');-->
<!--            event.preventDefault()-->
<!--            break;-->
<!--        case '*':-->
<!--            $.ajax('/handle_key?key=*');-->
<!--            event.preventDefault()-->
<!--            break;-->
<!--        case 'm':-->
<!--            $.ajax('/handle_key?key=m');-->
<!--            event.preventDefault()-->
<!--            break;-->
<!--        case 'u':-->
<!--            $.ajax('/handle_key?key=u');-->
<!--            event.preventDefault()-->
<!--            break;-->
<!--        //case 65:-->
<!--        //  tabs.active = 0;-->
<!--        //  event.preventDefault()-->
<!--        //  break;-->
<!--        //case 66:-->
<!--        //  tabs.active = 1;-->
<!--        //  event.preventDefault()-->
<!--        //  break;-->
<!--        }-->
<!--     });-->
<!--</script>-->

{% endblock %}
