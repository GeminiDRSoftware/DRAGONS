<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>What are Descriptors? &mdash; Descriptors v0.1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '#',
        VERSION:     '0.1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Descriptors v0.1 documentation" href="index.html" />
    <link rel="prev" title="A User’s Guide to Descriptors" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="index.html" title="A User’s Guide to Descriptors"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Descriptors v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="what-are-descriptors">
<h1>What are Descriptors?<a class="headerlink" href="#what-are-descriptors" title="Permalink to this headline">¶</a></h1>
<p>Descriptors are designed such that essential keyword values that describe a
particular concept can be accessed from the headers of a given dataset in a
consistent manner, regardless of which instrument was used to obtain the
data. This is particularly useful for Gemini data, since the majority of
keywords used to describe a particular concept at Gemini are not uniform
between the instruments.</p>
</div>
<div class="section" id="basic-descriptor-usage">
<span id="id1"></span><h1>Basic Descriptor Usage<a class="headerlink" href="#basic-descriptor-usage" title="Permalink to this headline">¶</a></h1>
<p>The command <tt class="docutils literal"><span class="pre">typewalk</span> <span class="pre">-l</span></tt> lists all available descriptors. As of August 3,
2011, there are 61 descriptors available (<a class="reference external" href="appendix.html#appendix-typewalk"><em>Appendix A</em></a>).</p>
<p>The following commands show an example of how to use descriptors and can be
entered at an interactive Python prompt (e.g., <tt class="docutils literal"><span class="pre">ipython</span></tt>, <tt class="docutils literal"><span class="pre">pyraf</span></tt>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astrodata</span> <span class="kn">import</span> <span class="n">AstroData</span>
<span class="go"># Load the fits file into AstroData</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ad</span> <span class="o">=</span> <span class="n">AstroData</span><span class="p">(</span><span class="s">&quot;N20091027S0137.fits&quot;</span><span class="p">)</span>
<span class="go"># Count the number of science extensions in the AstroData object</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ad</span><span class="o">.</span><span class="n">count_exts</span><span class="p">(</span><span class="n">extname</span><span class="o">=</span><span class="s">&quot;SCI&quot;</span><span class="p">)</span>
<span class="go">3</span>
<span class="go"># Get the airmass value using the airmass descriptor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">airmass</span> <span class="o">=</span> <span class="n">ad</span><span class="o">.</span><span class="n">airmass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">airmass</span>
<span class="go">1.327</span>
<span class="go"># Get the instrument name using the instrument descriptor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&quot;My instrument is </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">ad</span><span class="o">.</span><span class="n">instrument</span><span class="p">()</span>
<span class="go">My instrument is GMOS-N</span>
<span class="go"># Get the gain value for each science extension</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">ext</span> <span class="ow">in</span> <span class="n">ad</span><span class="p">[</span><span class="s">&quot;SCI&quot;</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">ext</span><span class="o">.</span><span class="n">gain</span><span class="p">()</span>
<span class="gp">...</span>
<span class="go">2.1</span>
<span class="go">2.337</span>
<span class="go">2.3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">ad</span><span class="o">.</span><span class="n">gain</span><span class="p">()</span>
<span class="go">{(&#39;SCI&#39;, 2): 2.3370000000000002, (&#39;SCI&#39;, 1): 2.1000000000000001,</span>
<span class="go">(&#39;SCI&#39;, 3): 2.2999999999999998}</span>
</pre></div>
</div>
<p>In the examples above, the airmass and instrument apply to the dataset as a
whole (the keywords themselves only exist in the PHU) and so only one value is
returned. However, the gain applies to the pixel data extensions and so for
this AstroData object, three values are returned, since there are three pixel
data extensions. In this case, a Python dictionary is used to store the values,
where the key of the dictionary is the (&#8220;<tt class="docutils literal"><span class="pre">EXTNAME</span></tt>&#8220;, <tt class="docutils literal"><span class="pre">EXTVER</span></tt>) tuple.</p>
</div>
<div class="section" id="advanced-descriptor-usage">
<span id="id2"></span><h1>Advanced Descriptor Usage<a class="headerlink" href="#advanced-descriptor-usage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="descriptorvalue">
<h2>DescriptorValue<a class="headerlink" href="#descriptorvalue" title="Permalink to this headline">¶</a></h2>
<p>When a descriptor is called, what is actually returned is a <tt class="docutils literal"><span class="pre">DescriptorValue</span></tt>
(<tt class="docutils literal"><span class="pre">DV</span></tt>) object:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="n">airmass</span><span class="p">)</span>
<span class="go">&lt;type &#39;instance&#39;&gt;</span>
</pre></div>
</div>
<p>Each descriptor has a default Python type defined:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">ad</span><span class="o">.</span><span class="n">airmass</span><span class="p">()</span><span class="o">.</span><span class="n">pytype</span>
<span class="go">&lt;type &#39;float&#39;&gt;</span>
</pre></div>
</div>
<p>If any of the following operations are applied to the <tt class="docutils literal"><span class="pre">DV</span></tt> object, the <tt class="docutils literal"><span class="pre">DV</span></tt>
object is automatically cast to the default Python type for that descriptor:</p>
<div class="highlight-python"><pre>+   -   *   /   //   %   **   &lt;&lt;   &gt;&gt;   ^   &lt;   &lt;=   &gt;   &gt;=   ==</pre>
</div>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="n">airmass</span><span class="o">*</span><span class="mf">1.0</span><span class="p">)</span>
<span class="go">&lt;type &#39;float&#39;&gt;</span>
</pre></div>
</div>
<p>When using operations with a <tt class="docutils literal"><span class="pre">DV</span></tt> object and a numpy object, care must be
taken. Consider the following cases:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ad</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span> <span class="o">/</span> <span class="n">ad</span><span class="o">.</span><span class="n">gain</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ad</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span> <span class="o">/</span> <span class="n">ad</span><span class="o">.</span><span class="n">gain</span><span class="p">()</span><span class="o">.</span><span class="n">as_pytype</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ad</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span> <span class="o">/</span> <span class="mf">12.345</span>
</pre></div>
</div>
<p>All the above commands return the same result (assuming that ad.gain() =
12.345). However, the first command is extremely slow but the second and third
commands are fast. In the first case, since both operands have overloaded
operators, the operator from the operand on the left will be used. For some
reason, the <tt class="docutils literal"><span class="pre">__div__</span></tt> operator from the numpy object loops over each pixel in
the numpy object and uses the <tt class="docutils literal"><span class="pre">DV</span></tt> object as an argument, which is very time
consuming. Therefore, the <tt class="docutils literal"><span class="pre">DV</span></tt> object should be cast to an appropriate
Python type before using it in an operation with a numpy object.</p>
<p>The descriptor value can be retrieved with the default Python type by using
<tt class="docutils literal"><span class="pre">as_pytype()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">elevation</span> <span class="o">=</span> <span class="n">ad</span><span class="o">.</span><span class="n">elevation</span><span class="p">()</span><span class="o">.</span><span class="n">as_pytype</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">elevation</span>
<span class="go">48.6889222222</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="n">elevation</span><span class="p">)</span>
<span class="go">&lt;type &#39;float&#39;&gt;</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">as_pytype()</span></tt> member function of the <tt class="docutils literal"><span class="pre">DV</span></tt> object should only be
required when the <tt class="docutils literal"><span class="pre">DV</span></tt> object can not be automatically cast to it&#8217;s default
Python type. For example, when it is necessary to use an actual descriptor
value (e.g., string, float, etc.) rather than a <tt class="docutils literal"><span class="pre">DV</span></tt> object as a key to a
Python dictionary, the <tt class="docutils literal"><span class="pre">DV</span></tt> object can be cast to it&#8217;s default Python type
using <tt class="docutils literal"><span class="pre">as_pytype()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_key</span> <span class="o">=</span> <span class="n">ad</span><span class="o">.</span><span class="n">gain_setting</span><span class="o">.</span><span class="n">as_pytype</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_value</span> <span class="o">=</span> <span class="n">my_dict</span><span class="p">[</span><span class="n">my_key</span><span class="p">]</span>
</pre></div>
</div>
<p>If an alternative Python type is required for whatever reason, the <tt class="docutils literal"><span class="pre">DV</span></tt>
object can be cast to the appropriate Python type as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">elevation_as_int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ad</span><span class="o">.</span><span class="n">elevation</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">elevation_as_int</span>
<span class="go">48</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="n">elevation_as_int</span><span class="p">)</span>
<span class="go">&lt;type &#39;int&#39;&gt;</span>
</pre></div>
</div>
<p>In the case where a descriptor returns multiple values (one for each pixel data
extension), a Python dictionary is used to store the values, where the key of
the dictionary is the (&#8220;<tt class="docutils literal"><span class="pre">EXTNAME</span></tt>&#8220;, <tt class="docutils literal"><span class="pre">EXTVER</span></tt>) tuple:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">ad</span><span class="o">.</span><span class="n">gain</span><span class="p">()</span>
<span class="go">{(&#39;SCI&#39;, 2): 2.3370000000000002, (&#39;SCI&#39;, 1): 2.1000000000000001,</span>
<span class="go">(&#39;SCI&#39;, 3): 2.2999999999999998}</span>
</pre></div>
</div>
<p>A descriptor that is related to the pixel data extensions but has the same
value for each pixel data extension will &#8220;act&#8221; as a single value that has a
Python type defined by the default Python type of that descriptor:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">xbin</span> <span class="o">=</span> <span class="n">ad</span><span class="o">.</span><span class="n">detector_x_bin</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">xbin</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="n">xbin</span><span class="p">)</span>
<span class="go">&lt;type &#39;instance&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">xbin</span><span class="o">.</span><span class="n">pytype</span>
<span class="go">&lt;type &#39;int&#39;&gt;</span>
</pre></div>
</div>
<p>If the original value of the descriptor is required, it can be retrieved by
using <tt class="docutils literal"><span class="pre">get_value()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">xbin</span> <span class="o">=</span> <span class="n">ad</span><span class="o">.</span><span class="n">detector_x_bin</span><span class="p">()</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">xbin</span>
<span class="go">{(&#39;SCI&#39;, 2): 2, (&#39;SCI&#39;, 1): 2, (&#39;SCI&#39;, 3): 2}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="n">xbin</span><span class="p">)</span>
<span class="go">&lt;type &#39;dict&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">xbin</span><span class="p">[(</span><span class="s">&quot;SCI&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="go">2</span>
</pre></div>
</div>
</div>
<div class="section" id="descriptorunits">
<h2>DescriptorUnits<a class="headerlink" href="#descriptorunits" title="Permalink to this headline">¶</a></h2>
<p>The DescriptorUnits (<tt class="docutils literal"><span class="pre">DU</span></tt>) object provides a way to access and update the
units for a given descriptor value. Basic implementation of this feature has
been completed and development is ongoing.</p>
</div>
</div>
<div class="section" id="writing-and-adding-new-descriptors">
<h1>Writing and Adding New Descriptors<a class="headerlink" href="#writing-and-adding-new-descriptors" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction-to-the-gemini-descriptor-code">
<h2>Introduction to the Gemini Descriptor Code<a class="headerlink" href="#introduction-to-the-gemini-descriptor-code" title="Permalink to this headline">¶</a></h2>
<p>The Gemini descriptor code is located in the gemini_python package in the
<tt class="docutils literal"><span class="pre">astrodata_Gemini/ADCONFIG_Gemini/descriptors</span></tt> directory. When writing and
adding new Gemini descriptors, a user / developer will require knowledge of the
following files:</p>
<blockquote>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">CalculatorInterface.py</span></tt></li>
<li><tt class="docutils literal"><span class="pre">mkCalculatorInterface.py</span></tt></li>
<li><tt class="docutils literal"><span class="pre">StandardDescriptorKeyDict.py</span></tt></li>
<li><tt class="docutils literal"><span class="pre">StandardGenericKeyDict.py</span></tt></li>
<li><tt class="docutils literal"><span class="pre">StandardGEMINIKeyDict.py</span></tt></li>
<li><tt class="docutils literal"><span class="pre">Standard&lt;INSTRUMENT&gt;KeyDict.py</span></tt></li>
<li><tt class="docutils literal"><span class="pre">Generic_Descriptor.py</span></tt></li>
<li><tt class="docutils literal"><span class="pre">GEMINI_Descriptor.py</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&lt;INSTRUMENT&gt;_Descriptor.py</span></tt></li>
<li><tt class="docutils literal"><span class="pre">calculatorIndex.Gemini.py</span></tt></li>
</ul>
</blockquote>
</div>
<div class="section" id="overview-of-the-gemini-descriptor-code">
<h2>Overview of the Gemini Descriptor Code<a class="headerlink" href="#overview-of-the-gemini-descriptor-code" title="Permalink to this headline">¶</a></h2>
<div class="figure">
<img alt="_images/descriptor_files.jpg" src="_images/descriptor_files.jpg" />
<p class="caption">An overview showing the relationship between the descriptor files. The files
located in the dashed box on the left are the descriptor files that
contain descriptor functions. The files located in the dotted box on the
right are the keyword files that contain dictionaries describing the
one-to-one relationship between a descriptor / variable that is used in the
associated descriptor files on the left (as shown by the double headed
arrows) and the keyword associated with that descriptor / variable. In
addition, the files within both the dashed box and the dotted box are
subject to inheritance, i.e., any information contained within the files
located lower in the chart will overwrite equivalent information that is
contained within files located higher in the chart. The result of this
inheritance is a single set of descriptor functions and keywords that will
be used for a given AstroData object.</p>
</div>
<p>When a descriptor is called (as described in the <a class="reference internal" href="#basic-descriptor-usage"><em>Basic Descriptor Usage</em></a> section and the <a class="reference internal" href="#advanced-descriptor-usage"><em>Advanced Descriptor Usage</em></a>) section, the <tt class="docutils literal"><span class="pre">CalculatorInterface.py</span></tt> file is
accessed. This file contains a function for each available descriptor
(see <a class="reference external" href="appendix.html#appendix-ci"><em>Appendix C</em></a> for an example function), which first look
directly in the PHU of the AstroData object for the associated descriptor
keyword as defined in one of the AstroData standard key dictionary files
(<tt class="docutils literal"><span class="pre">Standard&lt;INSTRUMENT&gt;KeyDict.py</span></tt>, <tt class="docutils literal"><span class="pre">StandardGEMINIKeyDict.py</span></tt>,
<tt class="docutils literal"><span class="pre">StandardGenericKeyDict.py</span></tt> or <tt class="docutils literal"><span class="pre">StandardDescriptorKeyDict.py</span></tt>). The
keywords in these dictionaries are combined via inheritance to create a final
dictionary containing a single set of keywords associated with a particular
AstroData object. The value of the keyword in the header of the data is
returned as the value of the descriptor. If the associated descriptor keyword
is not found in the header of the data, the descriptor files are then searched
in the order below to attempt to find an appropriate descriptor function, which
will return the value of the descriptor.</p>
<blockquote>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">&lt;INSTRUMENT&gt;_Descriptor.py</span></tt></li>
<li><tt class="docutils literal"><span class="pre">GEMINI_Descriptor.py</span></tt></li>
<li><tt class="docutils literal"><span class="pre">Generic_Descriptor.py</span></tt></li>
</ul>
</blockquote>
<p>A descriptor function is used if a descriptor requires access to multiple
keywords, requires access to keywords in the pixel data extensions (a
dictionary must be created) and / or requires some validation. If no
appropriate descriptor function is found, an exception is raised (<a class="reference internal" href="#descriptor-exceptions"><em>Section
4.5</em></a>). If a descriptor value is returned, either
directly from the header of the data or from a descriptor function, the <tt class="docutils literal"><span class="pre">CI</span></tt>
instantiates the <tt class="docutils literal"><span class="pre">DV</span></tt> object (which contains the descriptor value) and
returns this to the user.</p>
<div class="section" id="calculatorinterface-py">
<h3><tt class="docutils literal"><span class="pre">CalculatorInterface.py</span></tt><a class="headerlink" href="#calculatorinterface-py" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">CalculatorInterface.py</span></tt> file contains the <tt class="docutils literal"><span class="pre">CalculatorInterface</span></tt>
(<tt class="docutils literal"><span class="pre">CI</span></tt>) class, which contains a member function for each available descriptor
(see <a class="reference external" href="appendix.html#appendix-ci"><em>Appendix C</em></a> for an example function). This file is
auto-generated by the <tt class="docutils literal"><span class="pre">mkCalculatorInterface.py</span></tt> file (<a class="reference external" href="appendix.html#appendix-mkci"><em>Appendix B</em></a>) and should never be edited directly.</p>
</div>
<div class="section" id="mkcalculatorinterface-py">
<h3><tt class="docutils literal"><span class="pre">mkCalculatorInterface.py</span></tt><a class="headerlink" href="#mkcalculatorinterface-py" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">mkCalculatorInterface.py</span></tt> file contains the code required to generate
the file <tt class="docutils literal"><span class="pre">CalculatorInterface.py</span></tt>. To create <tt class="docutils literal"><span class="pre">CalculatorInterface.py</span></tt>,
run the following command:</p>
<div class="highlight-python"><pre>shell&gt; python mkCalculatorInterface.py &gt; CalculatorInterface.py</pre>
</div>
</div>
<div class="section" id="standarddescriptorkeydict-py">
<h3><tt class="docutils literal"><span class="pre">StandardDescriptorKeyDict.py</span></tt><a class="headerlink" href="#standarddescriptorkeydict-py" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">StandardDescriptorKeyDict.py</span></tt> file contains a Python dictionary named
<tt class="docutils literal"><span class="pre">globalStdkeyDict</span></tt>, which describes the one-to-one relationship between a
descriptor and the AstroData standard keyword associated with that descriptor
(<a class="reference external" href="appendix.html#appendix-sdkd"><em>Appendix D</em></a>).</p>
</div>
<div class="section" id="standardgenerickeydict-py">
<h3><tt class="docutils literal"><span class="pre">StandardGenericKeyDict.py</span></tt><a class="headerlink" href="#standardgenerickeydict-py" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">StandardGenericKeyDict.py</span></tt> file contains a Python dictionary named
<tt class="docutils literal"><span class="pre">stdkeyDictGeneric</span></tt>, which describes the one-to-one relationship between a
descriptor / variable that is used in the generic descriptor file
<tt class="docutils literal"><span class="pre">Generic_Descriptor.py</span></tt> and the keyword associated with that descriptor /
variable. The values in this dictionary overwrite (via inheritance) the
AstroData standard values defined in <tt class="docutils literal"><span class="pre">StandardDescriptorKeyDict.py</span></tt>.</p>
</div>
<div class="section" id="standardgeminikeydict-py">
<h3><tt class="docutils literal"><span class="pre">StandardGEMINIKeyDict.py</span></tt><a class="headerlink" href="#standardgeminikeydict-py" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">StandardGEMINIKeyDict.py</span></tt> file contains a Python dictionary named
<tt class="docutils literal"><span class="pre">stdkeyDictGEMINI</span></tt> and is used to overwrite (via inheritance) any of the
AstroData standard keywords defined in <tt class="docutils literal"><span class="pre">StandardDescriptorKeyDict.py</span></tt> and any
of the generic keywords defined in <tt class="docutils literal"><span class="pre">StandardGenericKeyDict.py</span></tt>. It is also
used to define variables for any keywords that need to be accessed in the
Gemini specific descriptor file <tt class="docutils literal"><span class="pre">GEMINI_Descriptor.py</span></tt>.</p>
</div>
<div class="section" id="standard-instrument-keydict-py">
<h3><tt class="docutils literal"><span class="pre">Standard&lt;INSTRUMENT&gt;KeyDict.py</span></tt><a class="headerlink" href="#standard-instrument-keydict-py" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">Standard&lt;INSTRUMENT&gt;KeyDict.py</span></tt> files contain a Python dictionary named
<tt class="docutils literal"><span class="pre">stdkeyDict&lt;INSTRUMENT&gt;</span></tt> and is used to overwrite (via inheritance) any of
the AstroData standard keywords defined in <tt class="docutils literal"><span class="pre">StandardDescriptorKeyDict.py</span></tt>,
any of the generic keywords defined in <tt class="docutils literal"><span class="pre">StandardGenericKeyDict.py</span></tt> and any of
the Gemini specific keyword defined in <tt class="docutils literal"><span class="pre">StandardGEMINIKeyDict.py</span></tt>. It is also
used to define variables for any keywords that need to be accessed in the
instrument specific descriptor file <tt class="docutils literal"><span class="pre">&lt;INSTRUMENT&gt;_Descriptor.py</span></tt>. These
instrument specific files are located in the corresponding <tt class="docutils literal"><span class="pre">&lt;INSTRUMENT&gt;</span></tt>
directory in the <tt class="docutils literal"><span class="pre">astrodata_Gemini/ADCONFIG_Gemini/descriptors</span></tt> directory.</p>
</div>
<div class="section" id="calculatorindex-gemini-py">
<span id="id3"></span><h3><tt class="docutils literal"><span class="pre">calculatorIndex.Gemini.py</span></tt><a class="headerlink" href="#calculatorindex-gemini-py" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">calculatorIndex.Gemini.py</span></tt> file contains a Python dictionary named
<tt class="docutils literal"><span class="pre">calculatorIndex</span></tt> and is used to define which Python object (i.e., the
descriptor class that defines the descriptor functions, in the form
<tt class="docutils literal"><span class="pre">&lt;module_name&gt;.&lt;calculator_class_name&gt;</span></tt>) to use as the calculator for a given
<tt class="docutils literal"><span class="pre">&lt;INSTRUMENT&gt;</span></tt>. An example of this dictionary is shown below.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">calculatorIndex</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">&quot;&lt;INSTRUMENT&gt;&quot;</span><span class="p">:</span><span class="s">&quot;&lt;INSTRUMENT&gt;_Descriptor.&lt;INSTRUMENT&gt;_DescriptorCalc()&quot;</span><span class="p">,</span>
  <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="generic-descriptor-py">
<h3><tt class="docutils literal"><span class="pre">Generic_Descriptor.py</span></tt><a class="headerlink" href="#generic-descriptor-py" title="Permalink to this headline">¶</a></h3>
<p>The generic descriptor file <tt class="docutils literal"><span class="pre">Generic_Descriptor.py</span></tt> contains descriptor
functions describing those keywords that are part of the FITS standard. There
are currently 53 keywords defined in the FITS standard
(<a class="reference external" href="http://heasarc.gsfc.nasa.gov/docs/fcg/standard_dict.html">http://heasarc.gsfc.nasa.gov/docs/fcg/standard_dict.html</a>). There are 4
descriptors currently available that access these FITS standard keywords:</p>
<blockquote>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">instrument</span> <span class="pre">[INSTRUME]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">object</span> <span class="pre">[OBJECT]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">telescope</span> <span class="pre">[TELESCOP]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ut_date</span> <span class="pre">[DATE-OBS]</span></tt></li>
</ul>
</blockquote>
</div>
<div class="section" id="gemini-descriptor-py">
<h3><tt class="docutils literal"><span class="pre">GEMINI_Descriptor.py</span></tt><a class="headerlink" href="#gemini-descriptor-py" title="Permalink to this headline">¶</a></h3>
<p>The Gemini specific descriptor file <tt class="docutils literal"><span class="pre">GEMINI_Descriptor.py</span></tt> contains
descriptor functions describing those keywords that are standard within
Gemini. There are currently 142 Gemini standard keywords, which are relevant to
the data file as a whole and exist in the PHU of the data. There are 21
descriptors currently available that access these Gemini standard keywords:</p>
<blockquote>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">airmass</span> <span class="pre">[AIRMASS]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">azimuth</span> <span class="pre">[AZIMUTH]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">cass_rotator_pa</span> <span class="pre">[CRPA]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">data_label</span> <span class="pre">[DATALAB]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">dec</span> <span class="pre">[DEC]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">elevation</span> <span class="pre">[ELEVATIO]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">local_time</span> <span class="pre">[LT]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">observation_class</span> <span class="pre">[OBSCLASS]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">observation_id</span> <span class="pre">[OBSID]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">observation_type</span> <span class="pre">[OBSTYPE]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">observation_epoch</span> <span class="pre">[OBSEPOCH]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">program_id</span> <span class="pre">[GEMPRGID]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">qa_state</span> <span class="pre">[RAWPIREQ,</span> <span class="pre">RAWGEMQA]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ra</span> <span class="pre">[RA]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">raw_bg</span> <span class="pre">[RAWBG]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">raw_cc</span> <span class="pre">[RAWCC]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">raw_iq</span> <span class="pre">[RAWIQ]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">raw_wv</span> <span class="pre">[RAWWV]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ut_time</span> <span class="pre">[UT]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">wavefront_sensor</span> <span class="pre">[OIWFS_ST,</span> <span class="pre">PWFS2_ST,</span> <span class="pre">AOWFS_ST]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">x_offset</span> <span class="pre">[XOFFSET]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">y_offset</span> <span class="pre">[YOFFSET]</span></tt></li>
</ul>
</blockquote>
</div>
<div class="section" id="instrument-descriptor-py">
<h3><tt class="docutils literal"><span class="pre">&lt;INSTRUMENT&gt;_Descriptor.py</span></tt><a class="headerlink" href="#instrument-descriptor-py" title="Permalink to this headline">¶</a></h3>
<p>The instrument specific descriptor files <tt class="docutils literal"><span class="pre">&lt;INSTRUMENT&gt;_Descriptor.py</span></tt> contain
descriptor functions specific to that <tt class="docutils literal"><span class="pre">&lt;INSTRUMENT&gt;</span></tt>. These instrument
specific files are located in the corresponding <tt class="docutils literal"><span class="pre">&lt;INSTRUMENT&gt;</span></tt> directory in
the <tt class="docutils literal"><span class="pre">astrodata_Gemini/ADCONFIG_Gemini/descriptors</span></tt> directory.</p>
</div>
</div>
<div class="section" id="how-to-add-a-new-descriptor">
<h2>How to add a new descriptor<a class="headerlink" href="#how-to-add-a-new-descriptor" title="Permalink to this headline">¶</a></h2>
<p>The following instructions describe how to add a new descriptor to the system.</p>
<blockquote>
<ol class="arabic">
<li><p class="first">First, check to see whether a descriptor already exists that has the same
concept as the new descriptor to be added (<a class="reference external" href="appendix.html#appendix-typewalk"><em>Appendix A</em></a>). If a new descriptor is required, edit the
<tt class="docutils literal"><span class="pre">mkCalculatorInterface.py</span></tt> file and add the new descriptor to the DD
constructor in the descriptors list in alphabetical order. Ensure that the
default Python type for the descriptor is defined:</p>
<div class="highlight-python"><pre>descriptors =   [
                    ...
                    DD("&lt;my_descriptor_name&gt;", pytype=str),
                    ...
                ]</pre>
</div>
</li>
<li><p class="first">Regenerate the <tt class="docutils literal"><span class="pre">CalculatorInterface.py</span></tt> file:</p>
<div class="highlight-python"><pre>shell&gt; python mkCalculatorInterface.py &gt; CalculatorInterface.py</pre>
</div>
</li>
<li><p class="first">Edit the <tt class="docutils literal"><span class="pre">globalStdkeyDict</span></tt> dictionary in the
<tt class="docutils literal"><span class="pre">StandardDescriptorKeyDict.py</span></tt> file to include the AstroData standard
keyword associated with the new descriptor (<a class="reference external" href="appendix.html#appendix-sdkd"><em>Appendix D</em></a>).</p>
</li>
<li><p class="first">If the new descriptor simply requires access to the AstroData standard
keyword in the header of the data and returns the value, the descriptor
can now be tested; go to step 7.</p>
<p>However, if the new descriptor requires access to a keyword that is
different from the AstroData standard keyword (perhaps specific to a
particular <tt class="docutils literal"><span class="pre">&lt;INSTRUMENT&gt;</span></tt>), go to step 5. If the new descriptor requires
access to multiple keywords and / or requires some validation, a
descriptor function must be created; go to step 6.</p>
</li>
<li><p class="first">If the new descriptor requires access to a keyword that is different from
the AstroData standard keyword, edit either the
<tt class="docutils literal"><span class="pre">StandardGenericKeyDict.py</span></tt> file, the <tt class="docutils literal"><span class="pre">StandardGEMINIKeyDict.py</span></tt> file
or the <tt class="docutils literal"><span class="pre">Standard&lt;INSTRUMENT&gt;KeyDict.py</span></tt> file (as appropriate) to include
the keyword associated with the new descriptor. The descriptor can now be
tested; go to step 7.</p>
</li>
<li><p class="first">If the new descriptor requires access to multiple keywords and / or
requires some validation, a descriptor function should be
created. Depending on the type of information the new descriptor will
provide, edit one of the following files to include the new descriptor
function:</p>
<blockquote>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Generic_Descriptor.py</span></tt></li>
<li><tt class="docutils literal"><span class="pre">GEMINI_Descriptor.py</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&lt;INSTRUMENT&gt;_Descriptor.py</span></tt></li>
</ul>
</blockquote>
<p>The <tt class="docutils literal"><span class="pre">&lt;INSTRUMENT&gt;_Descriptor.py</span></tt> descriptor file is located in the
<tt class="docutils literal"><span class="pre">&lt;INSTRUMENT&gt;</span></tt> directory. If the new descriptor is for a new
<tt class="docutils literal"><span class="pre">&lt;INSTRUMENT&gt;</span></tt>, create an <tt class="docutils literal"><span class="pre">&lt;INSTRUMENT&gt;</span></tt> directory and edit the
<tt class="docutils literal"><span class="pre">calculatorIndex.Gemini.py</span> <span class="pre">file</span></tt> appropriately (<a class="reference internal" href="#calculatorindex-gemini-py"><em>Section 4.2.7</em></a>). An example descriptor function
(<tt class="docutils literal"><span class="pre">detector_x_bin</span></tt>) from <tt class="docutils literal"><span class="pre">GMOS_Descriptor.py</span></tt> can be found in
<a class="reference external" href="appendix.html#appendix-descriptor"><em>Appendix E</em></a>. If the descriptor should return
more than one value, i.e., one value for each pixel data extension, a
dictionary should be returned by the descriptor function, where the key is
the (&#8220;<tt class="docutils literal"><span class="pre">EXTNAME</span></tt>&#8220;, <tt class="docutils literal"><span class="pre">EXTVER</span></tt>) tuple. If access to a particular keyword
is required, first check the appropriate keyword files
(<tt class="docutils literal"><span class="pre">StandardDescriptorKeyDict.py</span></tt>, <tt class="docutils literal"><span class="pre">StandardGenericKeyDict.py</span></tt>,
<tt class="docutils literal"><span class="pre">StandardGEMINIKeyDict.py</span></tt> and <tt class="docutils literal"><span class="pre">Standard&lt;INSTRUMENT&gt;KeyDict.py</span></tt>) to
see if it has already been defined. If required, the
<tt class="docutils literal"><span class="pre">Standard&lt;INSTRUMENT&gt;KeyDict.py</span></tt> file should be edited to contain any
new keywords required for this new descriptor function.</p>
</li>
<li><p class="first">Test the descriptor:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astrodata</span> <span class="kn">import</span> <span class="n">AstroData</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ad</span> <span class="o">=</span> <span class="n">AstroData</span><span class="p">(</span><span class="s">&quot;N20091027S0137.fits&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">ad</span><span class="o">.&lt;</span><span class="n">my_descriptor_name</span><span class="o">&gt;</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ol>
</blockquote>
</div>
<div class="section" id="descriptor-coding-guidelines">
<h2>Descriptor Coding Guidelines<a class="headerlink" href="#descriptor-coding-guidelines" title="Permalink to this headline">¶</a></h2>
<p>When creating descriptor functions, the guidelines below should be followed:</p>
<blockquote>
<ul class="simple">
<li>The descriptors determine the correct keyword value for data at any point
during processing</li>
<li>The descriptors will not write keywords to the headers of the data; the
descriptors only obtain information</li>
<li>The descriptor functions themselves do not log any messages</li>
<li>The descriptor values are not cached, since it is no effort to use the
descriptors to obtain the correct value as and when it is required</li>
<li>The descriptor values can be written to the history, for information only</li>
<li>The <tt class="docutils literal"><span class="pre">phu_get_key_value</span></tt> and <tt class="docutils literal"><span class="pre">get_key_value</span></tt> AstroData member functions
are used in the descriptor functions to access keywords in the headers of
the AstroData objects</li>
</ul>
</blockquote>
<p>For example, for raw GMOS data, the <tt class="docutils literal"><span class="pre">gain</span></tt> descriptor uses the raw keywords
in the header and a look up table to determine the gain value. During the first
data processing step for Gemini data (which includes standardizing the headers
of the data), the value of the raw <tt class="docutils literal"><span class="pre">GAIN</span></tt> keyword is overwritten (since it
was incorrect in the raw data) and the value of the raw <tt class="docutils literal"><span class="pre">GAIN</span></tt> keyword is
written to the HISTORY keyword (for information only). If a descriptor is then
called after the first processing step, the <tt class="docutils literal"><span class="pre">gain</span></tt> descriptor reads the value
directly from the <tt class="docutils literal"><span class="pre">GAIN</span></tt> keyword. This way, keyword values are always
correct, regardless of the processing state of the data (and any external
system that wishes to work on that data will also access the correct values).</p>
</div>
<div class="section" id="descriptor-exceptions">
<span id="id4"></span><h2>Descriptor Exceptions<a class="headerlink" href="#descriptor-exceptions" title="Permalink to this headline">¶</a></h2>
<p>Normally, if a descriptor is unable to return a value, <tt class="xref docutils literal"><span class="pre">None</span></tt> is returned
instead. However, exceptions that describe exactly why a value could not be
returned (where applicable) are stored so that a user can access that
information, if they wish to do so.</p>
<p>When writing descriptor functions, exceptions should be raised in the code with
an appropriate, explicit error message, so that it is clear to the user exactly
what went wrong. The exception is caught by the <tt class="docutils literal"><span class="pre">CI</span></tt> and if <tt class="docutils literal"><span class="pre">throwExceptions</span>
<span class="pre">=</span> <span class="pre">False</span></tt> (line 62 in <tt class="docutils literal"><span class="pre">astrodata/Calculator.py</span></tt>), the exception information
is stored in <tt class="docutils literal"><span class="pre">exception_info</span></tt> and <tt class="xref docutils literal"><span class="pre">None</span></tt> is returned. Otherwise the
exception is thrown. During development, <tt class="docutils literal"><span class="pre">throwExceptions</span> <span class="pre">=</span> <span class="pre">True</span></tt> so that
exceptions are thrown. When the code is released, <tt class="docutils literal"><span class="pre">throwExceptions</span> <span class="pre">=</span> <span class="pre">False</span></tt>
and the exception information will be available in
<tt class="docutils literal"><span class="pre">exception_info</span></tt>. Available astrodata exceptions can be found in
<tt class="docutils literal"><span class="pre">astrodata/Errors.py</span></tt>. Additional required exceptions can be added to this
file, if necessary.</p>
</div>
<div class="section" id="descriptor-docstrings">
<h2>Descriptor Docstrings<a class="headerlink" href="#descriptor-docstrings" title="Permalink to this headline">¶</a></h2>
<p>The current descriptor docstrings can be found in the member functions in the
<tt class="docutils literal"><span class="pre">CI</span></tt>. These docstrings are generated by the <tt class="docutils literal"><span class="pre">mkCalculatorInterface.py</span></tt>
file using the information located in the descriptorDescriptionDict.py file. It
is likely that the information in the descriptorDescriptionDict.py file will be
stored in the DD constructor in the future.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">What are Descriptors?</a></li>
<li><a class="reference external" href="#basic-descriptor-usage">Basic Descriptor Usage</a></li>
<li><a class="reference external" href="#advanced-descriptor-usage">Advanced Descriptor Usage</a><ul>
<li><a class="reference external" href="#descriptorvalue">DescriptorValue</a></li>
<li><a class="reference external" href="#descriptorunits">DescriptorUnits</a></li>
</ul>
</li>
<li><a class="reference external" href="#writing-and-adding-new-descriptors">Writing and Adding New Descriptors</a><ul>
<li><a class="reference external" href="#introduction-to-the-gemini-descriptor-code">Introduction to the Gemini Descriptor Code</a></li>
<li><a class="reference external" href="#overview-of-the-gemini-descriptor-code">Overview of the Gemini Descriptor Code</a><ul>
<li><a class="reference external" href="#calculatorinterface-py"><tt class="docutils literal"><span class="pre">CalculatorInterface.py</span></tt></a></li>
<li><a class="reference external" href="#mkcalculatorinterface-py"><tt class="docutils literal"><span class="pre">mkCalculatorInterface.py</span></tt></a></li>
<li><a class="reference external" href="#standarddescriptorkeydict-py"><tt class="docutils literal"><span class="pre">StandardDescriptorKeyDict.py</span></tt></a></li>
<li><a class="reference external" href="#standardgenerickeydict-py"><tt class="docutils literal"><span class="pre">StandardGenericKeyDict.py</span></tt></a></li>
<li><a class="reference external" href="#standardgeminikeydict-py"><tt class="docutils literal"><span class="pre">StandardGEMINIKeyDict.py</span></tt></a></li>
<li><a class="reference external" href="#standard-instrument-keydict-py"><tt class="docutils literal"><span class="pre">Standard&lt;INSTRUMENT&gt;KeyDict.py</span></tt></a></li>
<li><a class="reference external" href="#calculatorindex-gemini-py"><tt class="docutils literal"><span class="pre">calculatorIndex.Gemini.py</span></tt></a></li>
<li><a class="reference external" href="#generic-descriptor-py"><tt class="docutils literal"><span class="pre">Generic_Descriptor.py</span></tt></a></li>
<li><a class="reference external" href="#gemini-descriptor-py"><tt class="docutils literal"><span class="pre">GEMINI_Descriptor.py</span></tt></a></li>
<li><a class="reference external" href="#instrument-descriptor-py"><tt class="docutils literal"><span class="pre">&lt;INSTRUMENT&gt;_Descriptor.py</span></tt></a></li>
</ul>
</li>
<li><a class="reference external" href="#how-to-add-a-new-descriptor">How to add a new descriptor</a></li>
<li><a class="reference external" href="#descriptor-coding-guidelines">Descriptor Coding Guidelines</a></li>
<li><a class="reference external" href="#descriptor-exceptions">Descriptor Exceptions</a></li>
<li><a class="reference external" href="#descriptor-docstrings">Descriptor Docstrings</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="index.html"
                                  title="previous chapter">A User&#8217;s Guide to Descriptors</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/descriptor_user_guide.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="index.html" title="A User’s Guide to Descriptors"
             >previous</a> |</li>
        <li><a href="index.html">Descriptors v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2011, Gemini Observatory.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.5.
    </div>
  </body>
</html>